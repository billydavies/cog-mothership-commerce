{% extends 'Message:Mothership:ControlPanel::_templates/left_sidebar' %}

{% block sidebar %}
	{{ render(controller('Message:Mothership:Commerce::Controller:Product:Sidebar#index', {'productID':product.id}))}}
{% endblock %}

{% block main %}

<hgroup class="title">
		<h1>Editing Stock'</h1>
</hgroup>

{{ render(controller('Message:Mothership:Commerce::Controller:Product:ProductsMenu#index', {'productID':product.id}))}}

<section class="container-content">
	{{ form_start(form) }}
	<table>
		<thead>
			<tr>
				<th>SKU - Barcode</th>
				{% for location in locations %}
					<th>{{ location.displayName }}</th>
				{% endfor %}
			</tr>
		</thead>
		<tbody>
			{% for unit in units %}
				<tr>
					<td><span>{{ unit.sku }}</span> - <span>{{ unit.barcode }}</span></td>
					{% for location in locations %}
						<div class="inline">
							{% set locationName = ('location_'~location.name) %}
							<td>{{ unit.getStockForLocation(location) }} {{ form_widget(form[unit.id]['stock'][locationName]) }}</td>
						</div>
					{% endfor %}
				</tr>
			{% endfor %}
		</tbody>
	</table>
	<button type="submit" class="button small save" id="save-content">Update</button>
	{{ form_end(form) }}

</section>

{% endblock %}
